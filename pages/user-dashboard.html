<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>User Dashboard - Job Sphere</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    body { background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 50%, #e3f2fd 100%); font-family: 'Poppins', sans-serif; }
    .dashboard { max-width: 1000px; margin: 30px auto; padding: 0 20px; }
    .dashboard-header { background: linear-gradient(90deg, #1b5e20, #2e7d32); color: white; padding: 24px; border-radius: 12px; margin-bottom: 24px; }
    .dashboard-header h1 { margin: 0; }
    .welcome-msg { font-size: 0.95rem; opacity: 0.9; margin-top: 8px; }
    .tabs { display: flex; gap: 12px; border-bottom: 2px solid #ddd; margin-bottom: 24px; }
    .tab-btn { background: none; border: none; padding: 12px 20px; cursor: pointer; font-weight: 600; color: #666; border-bottom: 3px solid transparent; transition: all 0.2s; }
    .tab-btn.active { color: #2e7d32; border-bottom-color: #2e7d32; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .card { background: white; padding: 16px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.06); margin-bottom: 12px; }
    .card h3 { margin-top: 0; color: #2e7d32; }
    .empty-state { text-align: center; color: #666; padding: 40px 20px; }
    .btn { padding: 8px 16px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; background: linear-gradient(90deg, #2e7d32, #66bb6a); color: white; text-decoration: none; display: inline-block; transition: all 0.2s; }
    .btn:hover { transform: translateY(-2px); }
    .logout-btn { background: #f44336; }
    @media (max-width: 768px) { .tabs { flex-wrap: wrap; } }
  </style>
</head>
<body>
  <header class="header">
    <div class="container wrap">
      <a class="brand" href="/index.html">
        <div class="logo">JS</div>
        <div><strong>Job Sphere</strong></div>
      </a>
      <nav class="nav">
        <a href="/index.html">Home</a>
        <a href="/pages/jobs.html">All Jobs</a>
        <a href="/pages/categories.html">Categories</a>
        <a href="/pages/login.html">Login</a>
      </nav>
    </div>
  </header>

  <main class="dashboard">
    <div class="dashboard-header">
      <h1>ðŸ‘¤ My Dashboard</h1>
      <div class="welcome-msg" id="welcomeMsg">Welcome! Manage your jobs and applications.</div>
    </div>

    <div class="tabs">
      <button class="tab-btn active" onclick="switchTab('profile')">Profile</button>
      <button class="tab-btn" onclick="switchTab('applications')">Applications</button>
      <button class="tab-btn" onclick="switchTab('settings')">Settings</button>
    </div>

    <div id="profile" class="tab-content active">
      <div class="card">
        <h3>Profile Information</h3>
        <p><strong>Name:</strong> <span id="profileName">-</span></p>
        <p><strong>Email:</strong> <span id="profileEmail">-</span></p>
        <p><strong>Member Since:</strong> <span id="profileJoined">-</span></p>
      </div>
    </div>

    <div id="applications" class="tab-content">
      <div id="applicationsList" class="empty-state">No applications yet. <a href="/pages/jobs.html">Browse jobs</a></div>
    </div>

    <div id="settings" class="tab-content">
      <div class="card">
        <h3>Account Settings</h3>
        <button class="btn logout-btn" onclick="handleLogout()">Logout</button>
      </div>
    </div>
  </main>

  <footer class="footer">Â© Job Sphere â€¢ Find Your Perfect Fit</footer>

  <script src="/db.js"></script>
  <script src="../app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const user = getCurrentUser();
      if (!user) {
        location.href = '/pages/login.html';
        return;
      }

      document.getElementById('welcomeMsg').textContent = `Welcome, ${user.name}!`;
      document.getElementById('profileName').textContent = user.name || '-';
      document.getElementById('profileEmail').textContent = user.email || '-';
      document.getElementById('profileJoined').textContent = user.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'Recently';
    });

    function switchTab(tabName) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');
      event.target.classList.add('active');
    }

    function handleLogout() {
      if (confirm('Are you sure you want to logout?')) {
        logout();
      }
    }
  </script>
</body>
</html>
